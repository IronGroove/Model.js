<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Model.js demo</title>
</head>
<body>
  <h1 id="h1">Here be Model.js demo.</h1>

  <script src="../Model.js"></script>

  <script>
    var Note = new Model('Note', function () {
      this.attr('id!', 'number');
      this.attr('title+', 'string', 'nonempty');
      this.attr('lang+', 'string', [ 'in', ['en', 'uk', 'ru']]);
      this.attr('text', 'string');
    });

    Note.bind('initialize', function () {
      if (!this.data.lang) this.set('lang', 'en');
    });

    var note = new Note({ title: "Model.js is awesome" });

    note.bind('change', function (changes) {
      if (changes.title !== undefined) document.getElementById('h1').innerHTML = changes.title;
    });

    console.log('isNew', note.isNew);
    console.log('hasChanged', note.hasChanged);
    note.data.title = '';
    console.log('hasChanged', note.hasChanged);
    console.log('isValid', note.isValid);
    console.log('errors', note.errors);
  </script>
</body>
</html>
